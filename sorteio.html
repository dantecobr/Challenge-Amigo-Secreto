<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Sorteio de Amigo Secreto</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .participante-item { border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; }
        .link-pronto { background-color: #e6ffe6; padding: 10px; margin-top: 10px; border-radius: 5px; }
        button { padding: 10px 20px; font-size: 16px; cursor: pointer; background-color: #007bff; color: white; border: none; border-radius: 5px; }
        h3 { border-bottom: 2px solid #007bff; padding-bottom: 5px; }
    </style>
</head>
<body>

    <h1>Administra√ß√£o do Amigo Secreto</h1>

    <p><strong>ATEN√á√ÉO:</strong> Antes de sortear, certifique-se de que a vari√°vel <code>urlBaseRevelacao</code> no c√≥digo JavaScript abaixo est√° correta (o endere√ßo onde voc√™ vai hospedar a p√°gina <code>revelacao.html</code>).</p>

    <button onclick="realizarSorteio()">1. Realizar Sorteio e Gerar Links</button>
    
    <hr>
    
    <h3>2. Links Prontos para Envio (Copie e Cole no WhatsApp):</h3>
    <div id="links-de-envio">
        <p>Clique no bot√£o acima para iniciar.</p>
    </div>

    <script>
        // =======================================================
        // 1. DADOS INICIAIS (PREENCHA AQUI!)
        // O n√∫mero de WhatsApp deve estar no formato internacional: 55 DDD N√öMERO
        // Exemplo: 55 84 987654321
        // =======================================================
        const participantes = [
            { nome: "Ana Clara", zap: "558496634604", amigoSecreto: "" },
            { nome: "Dante Marques", zap: "558496013344", amigoSecreto: "" },
            { nome: "Kallyny", zap: "558487938890", amigoSecreto: "" },
            { nome: "Rodolfo", zap: "558499303180", amigoSecreto: "" },
            { nome: "J√∫lia", zap: "", amigoSecreto: "" }, // Sem n√∫mero fornecido
            { nome: "Ana Maria", zap: "558499101380", amigoSecreto: "" },
            { nome: "Ronaldo", zap: "558487464446", amigoSecreto: "" },
            { nome: "Ton", zap: "558496636715", amigoSecreto: "" },
            { nome: "Anny Kelly", zap: "558487848323", amigoSecreto: "" },
            { nome: "Gl√°ucio", zap: "558496104467", amigoSecreto: "" },
            { nome: "Ay√¥", zap: "", amigoSecreto: "" }  // Sem n√∫mero fornecido
        ];
        
        // =======================================================
        // 2. CONFIGURA√á√ÉO DA URL DE REVELA√á√ÉO (MUDE AQUI!)
        // Se voc√™ hospedar no GitHub Pages, seria algo como: 
        // "https://seuusuario.github.io/seuprojeto/revelacao.html"
        // Se for local (para testes), use: "revelacao.html"
        // =======================================================
        const urlBaseRevelacao = "revelacao.html"; 

        // =======================================================
        // FUN√á√ÉO DE SORTEIO (N√£o precisa mudar aqui)
        // =======================================================
        function realizarSorteio() {
            if (participantes.length < 2) {
                alert("√â necess√°rio pelo menos dois participantes!");
                return;
            }

            const nomes = participantes.map(p => p.nome);
            let sorteados = [...nomes];

            // Algoritmo de sorteio (Fisher-Yates modificado)
            participantes.forEach(p => p.amigoSecreto = ""); // Limpa resultados anteriores
            
            let sucesso = false;
            let tentativas = 0;

            // Tenta sortear no m√°ximo 100 vezes para evitar loop infinito em casos raros/imposs√≠veis
            while (!sucesso && tentativas < 100) {
                tentativas++;
                const listaEmbaralhada = [...nomes].sort(() => 0.5 - Math.random());
                sucesso = true;
                
                for (let i = 0; i < participantes.length; i++) {
                    // Verifica se a pessoa n√£o tirou a si mesma
                    if (participantes[i].nome === listaEmbaralhada[i]) {
                        sucesso = false;
                        break; 
                    }
                }

                if (sucesso) {
                    for (let i = 0; i < participantes.length; i++) {
                        participantes[i].amigoSecreto = listaEmbaralhada[i];
                    }
                }
            }
            
            if (tentativas >= 100) {
                alert("Falha no sorteio ap√≥s 100 tentativas. Tente novamente.");
                return;
            }

            // GERA√á√ÉO DOS LINKS
            gerarLinksWhatsApp();
        }

        function gerarLinksWhatsApp() {
            const container = document.getElementById('links-de-envio');
            container.innerHTML = ''; // Limpa resultados anteriores

            participantes.forEach(p => {
                // O nome do amigo secreto √© anexado √† URL ap√≥s o # (hash)
                const linkRevelacao = `${urlBaseRevelacao}#${encodeURIComponent(p.amigoSecreto)}`;
                
                // Mensagem a ser enviada pelo WhatsApp (codificada para URL)
                const mensagem = `ü•≥ Ol√°, ${p.nome}! Seu link para descobrir seu Amigo Secreto √©: ${linkRevelacao}%0A%0A_Aten√ß√£o: N√£o compartilhe este link!_`; // %0A √© uma quebra de linha no WhatsApp
                
                // Cria o link final wa.me
                const linkWhatsApp = `https://wa.me/${p.zap}?text=${mensagem}`;

                // Exibe o link na tela
                const divElement = document.createElement('div');
                divElement.classList.add('link-pronto');
                divElement.innerHTML = `
                    <p><strong>Para: ${p.nome}</strong> (Enviar para ${p.zap})</p>
                    <a href="${linkWhatsApp}" target="_blank">Clique para Abrir o WhatsApp e Enviar</a>
                    <p style="font-size: 0.8em; margin-top: 5px;">Link Gerado: <code>${linkRevelacao}</code></p>
                `;
                container.appendChild(divElement);
            });
        }
    </script>
</body>
</html>
